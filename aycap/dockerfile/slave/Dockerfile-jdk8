FROM jenkins/inbound-agent:alpine
USER root

RUN apk update && \
    apk add --no-cache \
    git \
    docker \
    maven \
    gradle \
    jq

COPY ./assets/certs/aycapsu01ts472.cer aycapsu01ts472.cer

RUN keytool \
    -import \
    -trustcacerts \
    -alias aycapsu01ts472.dso.aycap.bayad.co.th \
    -keystore $JAVA_HOME/jre/lib/security/cacerts \
    -file aycapsu01ts472.cer \
    -storepass changeit \
    -noprompt

VOLUME [ "/var/run/docker.sock" ]